<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify User Profile</title>
</head>  <style>
  @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap');
  :root {
    --tufts-blue: #3c91e6ff;
    --yellow-green: #9fd356ff;
    --raisin-black: #342e37ff;
    --baby-powder: #fafffdff;
    --coral: #fa824cff;
  }

  *{
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  body {
    font-family: 'Fredoka', sans-serif;
    margin: 0;
    padding: 0;
    background: var(--raisin-black);
    color: var(--yellow-green);
    padding: 2rem;
  }
  ul {
    margin-top: 1rem;
    list-style: none;
  }

  img {
    width: 300px;
    height: 300px;
    object-fit: cover;
    margin-bottom: 1rem;
    /* clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); */

  }

  i {
    font-size: 1.7rem;
  }

  h3{
    display: inline;
    font-size: 1rem;
    font-weight: 500;
    text-transform: capitalize;
    color: var(--licorice);
    background: white;
    padding: 0.2rem;
  }

  form {
    display: flex;
  }

  input {
    padding: 0.5rem;
    font-weight: 700;
  }

  button {
    background-color: var(--auburn);
    color: white;
    outline: none;
    padding: 0.5rem;
    border: none;
    cursor: pointer;
    text-transform: capitalize;
    font-weight: 700;
    text-align: start;
  }

  @media (max-width: 600px) {
  }

  </style>
  <script src="https://kit.fontawesome.com/8e13a44ce3.js" crossorigin="anonymous"></script>
<body>
    {% if user %}
    <ul>
      <li>
        <img src="{{ user.images[0].url }}" alt="{{ user.display_name }}">
    </li>
        <li><strong>Display Name:</strong> {{ user.display_name }}</li>
        <li><strong>Url:</strong> {{ user.external_urls.spotify }}</li>
        <li><strong>Followers:</strong> {{ user.followers.total }}</li>
    </ul>
    <button id="togglePlay" class="button">Toggle Play</button>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>

    <script>
      window.onSpotifyWebPlaybackSDKReady = () => {
  const token = '{{ token_info }}';
  const player = new Spotify.Player({
    name: 'Web Playback SDK Quick Start Player',
    getOAuthToken: cb => { cb(token); },
    volume: 0.5
  });
      // Error handling
      player.addListener('initialization_error', ({ message }) => { console.error(message); });
    player.addListener('authentication_error', ({ message }) => { console.error(message); });
    player.addListener('account_error', ({ message }) => { console.error(message); });
    player.addListener('playback_error', ({ message }) => { console.error(message); });

    // Playback status updates
    player.addListener('player_state_changed', state => { console.log(state); });

    // Ready
    player.addListener('ready', ({ device_id }) => {
      console.log('Ready with Device ID', device_id);
    });

    // Not Ready
    player.addListener('not_ready', ({ device_id }) => {
      console.log('Device ID has gone offline', device_id);
    });

    // Connect to the player!
    player.connect().then(success => {
      if (success) {
        console.log('The Web Playback SDK successfully connected to Spotify!');
      }
    });
};
    </script>
    {% else %}
        <p>No token information available. Please <a href="{{ url_for('login') }}">login</a>.</p>
    {% endif %}

</body>
</html>